
#include "../config.h"

#include "../common/common.h"

//#define   STRICT
//#include <windows.h>
//#include <commdlg.h>

#include <stdio.h>
#include <string.h>

char mc1;
char mc2;
char mc3;

long f1_init_ext(void);
long f1_next_ext(void);
long f1_get_fln(char *);
long f1_get_fln2(char *);

#define SENT_LEN         8000000
#define SENT_LEN2        300
#define SENT_NUM         3000000

char load8[SENT_NUM][SENT_LEN2];
long load8_l;

char sent_s[SENT_LEN];
long sent_l;

long sent8(char *);
long sent8in1(void);
long sent8add2(void);

int  m_pp;
char m_cc;

long sent8wrt1(void);

#define TREE2_SIZE 1000000
#define LIST_SIZE  50000

/*
class tree2
{
  private:
*/
    char  t1_node_mark[TREE2_SIZE];
    char  t1_node_val[TREE2_SIZE][300];

    //int   t1_node_val2[TREE2_SIZE];

    int   t1_node_pp[TREE2_SIZE][3];
    int   t1_root_pp;
    int   t1_buff_pp;
    
    int   t1_find_pp;
    int   t1_find_pp2;
    int   t1_find_side;
    
    int   t1_list_stack[LIST_SIZE];
    char  t1_list_stack_type[LIST_SIZE];
    int   t1_list_pp;

    char  t1_out_buff[TREE2_SIZE][300];
    //long long int t1_out_buff2[TREE2_SIZE];

    //int   t1_out_buff3[TREE2_SIZE][5][3];
    //int   t1_out_buff3_pp[TREE2_SIZE];

    int   t1_out_pp;

  //public:

    int   t1_init_tree2(void);
    int   t1_new_node(void);
    int   t1_clear_node(int pp);
    int   t1_search_node(char *pstr);
    int   t1_insert_node(char *pstr);
    int   t1_dsp_tree2(void);
    int   t1_after_list(void);
    int   t1_out_list(char *pstr,long long int ,int);
    int   t1_dsp_list(void);
    int   t1_save_list(char *fn);

//};

//extern class tree2 tree2a;

//int pascal WinMain(HINSTANCE ins
//		  ,HINSTANCE pins
//		  ,LPSTR cl
//		  ,int show)
int main(void)
{
	FILE *fp1;
	long  i,j,k,l;
	char  s1[300];

	MessageBox(0,"load stringcase000.txt,write to string2base000.txt","message",MB_OK);

	f1_init_ext();

	j=0;
	load8_l=0;

	while (1)
	{
		f1_get_fln2(s1);

        	t1_init_tree2();

		i=sent8(s1);
		if (i==1) break;

		sent8wrt1();

		i=f1_next_ext();
		if (i==1) break;
	}

	MessageBox(0,"words ok","message",MB_OK);

	return(0);
}

long f1_init_ext(void)
{
	mc1='0';
	mc2='0';
	mc3='0';
	return(0);
}

long f1_next_ext(void)
{
	mc1++;
	if (mc1>'9')
	{
		mc1='0';
		mc2++;
		if (mc2>'9')
		{
			mc1='0';
			mc2='0';
			mc3++;
			if (mc3>'9') return(1);
		}
	}

	return(0);
}

long f1_get_fln1(char *s1)
{
	strcpy(s1,"string2base   .txt");

	s1[11]=mc3;
	s1[12]=mc2;
	s1[13]=mc1;

	return(0);
}

long f1_get_fln2(char *s1)
{
	strcpy(s1,"stringcase   .txt");

	s1[10]=mc3;
	s1[11]=mc2;
	s1[12]=mc1;

	return(0);
}


long sent8(char *fln)
{
	FILE *fp1;
	int  i,j,k,l;

	fp1=fopen(fln,"r");
	if (fp1==NULL)
	{
		MessageBox(0,fln,"open file error",MB_OK);
		return(1);
	}

	while(!feof(fp1))
	{
		sent_s[0]=0;

		fgets(sent_s,SENT_LEN,fp1);

		//for (i=0;i<(int)strlen(sent_s);i++)
		//{
		//	if ((sent_s[i]<' ')&&(sent_s[i]>0)) sent_s[i]=0;
		//}

		string_trim(sent_s);

		j=(int)strlen(sent_s);
		if (j>=300) continue;

		string_e_space(sent_s);

		//MessageBox(0,word6_s,"message",MB_OK);

		i=sent8in1();

		if (i==0) sent8add2();
	}

	fclose(fp1);

	return(0);
}

long sent8in1(void)
{
  	int  i,j,k;
	char c1/*,s1[SENT_LEN]*/;
/*
	for (k=0;k<load8_l;k++)
	{
		if (strcmp(load8[k],sent_s)==0) return(1);
	}
*/
	if ((int)strlen(sent_s)>=300) return(1);

	i=t1_search_node(sent_s);
	if (i==1)
	{
		t1_insert_node(sent_s);
		return(0);
	}
	else
	{
		return(1);
	}
}

long sent8add2(void)
{
  	int  i,j,k;
	char c1;

	for (i=0;i<SENT_LEN2;i++)
	{
		load8[load8_l][i]=sent_s[i];
	}

	load8_l++;

	if (load8_l>=SENT_NUM)
	{
		MessageBox(0,"sent_num too small","message",MB_OK);
		load8_l--;
	}

	return(0);
}

long sent8wrt1(void)
{
	FILE *fp1;
	int  i,j,k;
	char c1,s1[300];

    	f1_get_fln1(s1);

	fp1=fopen(s1,"w");
	if (fp1==NULL)
	{
		MessageBox(0,"open string2base000.txt fail ","message",MB_OK);
		return(0);
	}

	for (k=0;k<load8_l;k++)
	{
		fputs(load8[k],fp1);
		fputs("\n",fp1);
	}

	fclose(fp1);

	load8_l=0;

	return(0);
}

#include "../common/common.c"

